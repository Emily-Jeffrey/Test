<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gowanus Canal Futures</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="interface-container">
      <img
        id="computer-background"
        src="images/COMPUTERBACKGROUND.png"
        alt="Computer"
      />

      <!-- ON/OFF Toggle -->
      <div id="toggle-switch" class="toggle-off">
        <img
          id="toggle-off-img"
          src="images/off.png"
          alt="OFF"
          class="toggle-img active"
        />
        <img
          id="toggle-on-img"
          src="images/on.png"
          alt="ON"
          class="toggle-img"
        />
      </div>

      <!-- Knob images that rotate -->
      <img
        id="knob1-img"
        class="knob-img"
        src="images/knob1.png"
        alt="Year Knob"
      />
      <img
        id="knob2-img"
        class="knob-img"
        src="images/knob2.png"
        alt="Length Knob"
      />
      <img
        id="knob3-img"
        class="knob-img"
        src="images/knob2.png"
        alt="Volume Knob"
      />

      <canvas id="knob-canvas"></canvas>

      <div id="year-display">2025</div>

      <div id="text-display">
        <img
          id="slideshow-image"
          src="Gowanus images/image 1.png"
          alt="Gowanus slideshow"
        />
        <p id="generated-text" aria-hidden="true">Initializing...</p>
      </div>
    </div>

    <script src="markov.js"></script>
    <script src="knobs.js"></script>
    <script src="app.js"></script>

    <script>
      const SLIDESHOW_IMAGES = [
        "Gowanus images/image 1.png",
        "Gowanus images/image 2.png",
        "Gowanus images/image 3.png",
        "Gowanus images/image 4.png",
        "Gowanus images/image 5.jpg",
        "Gowanus images/image 6.png",
        "Gowanus images/Image 7.JPEG",
      ];

      function startSlideshow() {
        const imgEl = document.getElementById("slideshow-image");
        if (!imgEl || SLIDESHOW_IMAGES.length === 0) return;
        let idx = 0;
        const swap = () => {
          imgEl.src = SLIDESHOW_IMAGES[idx];
          idx = (idx + 1) % SLIDESHOW_IMAGES.length;
        };
        swap();
        setInterval(swap, 4000);
      }

      window.addEventListener("DOMContentLoaded", () => {
        initKnobs();
        initializeMarkov();
        startSlideshow();
        // Don't call generateAndDisplay() here - wait for toggle
      });
    </script>
  </body>
</html>
